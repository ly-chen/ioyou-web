(this["webpackJsonpreact-firebase-ts-boilerplate"]=this["webpackJsonpreact-firebase-ts-boilerplate"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),o=a.n(c),l=a(8),i=a.n(l),s=a(10),u=a(6),m=a(46),d=a(13),g="/",h="/signup",p="/login",f="/new",v="/user/:username",E="/post/:postid",b=a(25),y=Object(n.createContext)({}),O=function(){return Object(n.useContext)(y)},j=a(76),k=a(32),x=a.n(k),S=(a(96),a(97),a(99),{apiKey:"AIzaSyBJ9makgflmK4lFIt7Wc3HHW8qS8WiYz4A",authDomain:"ioyou-71889.firebaseapp.com",databaseURL:"https://ioyou-71889.firebaseio.com",projectId:"ioyou-71889",messagingSenderId:"193251044264"}),w=a(117),C=a(124),T=a(118),_=a(123),B=a(89),L=a(78),P=a(119),N=a(79),G=a(125),I=a(120),R=Object(n.createContext)({auth:{},initializing:!0}),A=function(){return Object(n.useContext)(R)},M=a(62),q=a.n(M),F=function(){var e=O(),t=A(),a=Object(n.useState)(null),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),g=d[0],h=d[1],p=Object(n.useState)(null),f=Object(u.a)(p,2),v=f[0],E=f[1],y=Object(n.useState)(null),j=Object(u.a)(y,2),k=j[0],x=j[1],S=Object(n.useState)([]),R=Object(u.a)(S,2),M=(R[0],R[1],Object(n.useState)(!1)),F=Object(u.a)(M,2),H=F[0],z=F[1],D=Object(n.useState)(!1),W=Object(u.a)(D,2),U=W[0],K=W[1],Q=Object(n.useState)(!1),V=Object(u.a)(Q,2),J=V[0],X=V[1],Z=Object(n.useState)(!1),Y=Object(u.a)(Z,2),$=Y[0],ee=Y[1],te=Object(n.useState)(0),ae=Object(u.a)(te,2),ne=ae[0],re=ae[1];Object(n.useEffect)((function(){var a=.001*(new Date).getTime()>>0;re(a),console.log(a);var n=function(){var a=Object(s.a)(i.a.mark((function a(){var n,r,c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.db.collection("users").doc(null===(n=t.auth)||void 0===n?void 0:n.uid).get();case 3:return c=a.sent,console.log("user = ",c.data()),o=null===(r=c.data())||void 0===r?void 0:r.actives,console.log("channelList = ",o),console.log("object.keys() = ",Object.keys(o).filter((function(e){return 1==o[e]}))),a.abrupt("return",Object.keys(o).filter((function(e){return 1==o[e]})));case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}(),r=function(){var t=Object(s.a)(i.a.mark((function t(a,n,r){var c,o,s,u,m,d,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=[],s=e.db.collection("posts").orderBy(a,"desc"),u=null,console.log("subjects =",r),void 0!=r&&0!=(null===r||void 0===r?void 0:r.length)){t.next=16;break}if("home"!==n){t.next=11;break}u=null,K(!0),t.next=14;break;case 11:return t.next=13,s.limit(10).get();case 13:u=t.sent;case 14:t.next=26;break;case 16:if("home"!==n){t.next=23;break}return t.next=19,s.where("channels","array-contains-any",r).limit(10).get();case 19:u=t.sent,console.log("posts = ",u),t.next=26;break;case 23:return t.next=25,s.limit(10).get();case 25:u=t.sent;case 26:if(!(null===(c=u)||void 0===c?void 0:c.empty)&&null!=u){t.next=29;break}return console.log("No matching documents"),t.abrupt("return");case 29:u.forEach((function(e){o=[].concat(Object(b.a)(o),[{id:e.id,data:e.data()}])})),m=0;case 31:if(!(m<o.length)){t.next=40;break}return d=o[m],t.next=35,e.db.collection("comments").where("parent","==",d.id).get();case 35:g=t.sent,o[m]={id:d.id,data:d.data,numComments:g.size};case 37:m++,t.next=31;break;case 40:"all"===n&&(l(o),z(!0)),"home"===n&&(h(o),K(!0)),"academic"===n&&(E(o),X(!0)),"bulletin"===n&&(x(o),ee(!0)),t.next=49;break;case 46:t.prev=46,t.t0=t.catch(0),console.log(t.t0);case 49:case"end":return t.stop()}}),t,null,[[0,46]])})));return function(e,a,n){return t.apply(this,arguments)}}();(function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!t.auth){e.next=5;break}return e.next=4,n();case 4:a=e.sent;case 5:a==[]||void 0==a?(r("timestamp.seconds","all",void 0),r("timestamp.seconds","home",void 0),r("timestamp.seconds","academic",void 0),r("timestamp.seconds","bulletin",void 0)):(r("timestamp.seconds","all",a),r("timestamp.seconds","home",a),r("timestamp.seconds","academic",a),r("timestamp.seconds","bulletin",a)),console.log("subjects = ",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,e]);var ce=function(){return r.a.createElement("div",{style:{paddingTop:15}},r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null),r.a.createElement(C.a.Text,null),r.a.createElement(T.a,{animation:"border"}))),r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null),r.a.createElement(C.a.Text,null),r.a.createElement(T.a,{animation:"border"}))),r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null),r.a.createElement(C.a.Text,null),r.a.createElement(T.a,{animation:"border"}))),r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null),r.a.createElement(C.a.Text,null),r.a.createElement(T.a,{animation:"border"}))),r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null),r.a.createElement(C.a.Text,null),r.a.createElement(T.a,{animation:"border"}))))},oe=function(e){return e.map((function(e){return r.a.createElement("div",{key:e.id,style:{paddingTop:15}},function(e){var t=ne-e.data.timestamp.seconds,a="";if(t<120)a="about a minute ago";else if(t<3600)a="".concat(Math.floor(t/60)," minutes ago");else if(t<86400){var n=Math.floor(t/3600);a=1==n?"about an hour ago":"".concat(n," hours ago")}else{var c=Math.floor(t/86400);a=1==c?"yesterday":"".concat(c," days ago")}return r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement("a",{href:"/post/".concat(e.id)},r.a.createElement(C.a.Title,null,e.data.title)),r.a.createElement(C.a.Subtitle,null,function(){var t,a=null===(t=e.data.channels)||void 0===t?void 0:t.map((function(t){return r.a.createElement("p",{key:t},0==e.data.channels.indexOf(t)?"#".concat(t):", #".concat(t))}));return r.a.createElement("div",null,r.a.createElement(w.a,{style:{marginLeft:1}},a))}()),r.a.createElement(C.a.Text,{className:q.a.fontLess}," ",e.data.desc),r.a.createElement(C.a.Text,{className:q.a.fontLess},1==e.numComments?r.a.createElement("a",{href:"/post/".concat(e.id)},e.numComments," comment"):r.a.createElement("a",{href:"/post/".concat(e.id)},e.numComments," comments")," "," - posted by ",r.a.createElement("a",{href:"/user/".concat(e.data.authorName)},"@".concat(e.data.authorName))," - ",a)))}(e))}))};return r.a.createElement("div",null,r.a.createElement(_.a,{bg:"light",variant:"light"},r.a.createElement(_.a.Brand,{href:"/"}," ","ioyou"),r.a.createElement(B.a,{className:"ml-auto"},t.auth?r.a.createElement("div",null,r.a.createElement(L.a,{variant:"light",onClick:Object(s.a)(i.a.mark((function a(){var n,r,c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.db.collection("users").doc(null===t||void 0===t||null===(n=t.auth)||void 0===n?void 0:n.uid).get();case 2:c=a.sent,o=null===c||void 0===c||null===(r=c.data())||void 0===r?void 0:r.username,window.location.href="/user/".concat(o);case 5:case"end":return a.stop()}}),a)}))),style:{marginRight:10}},"Profile"),r.a.createElement(L.a,{href:"/new",variant:"outline-dark",style:{marginRight:10}},"Create Post"),r.a.createElement(L.a,{variant:"light",onClick:function(){e.doSignOut(),window.location.reload()}},"sign out")):r.a.createElement("div",null,r.a.createElement(L.a,{variant:"outline-dark",href:"/login",style:{marginRight:10}},"log in"),r.a.createElement(L.a,{variant:"light",href:"/signup"},"sign up")))),r.a.createElement(P.a,{className:q.a.paddingTop},r.a.createElement(w.a,null,r.a.createElement(N.a,null,r.a.createElement("h1",{style:{paddingLeft:22,paddingBottom:15}},"Feed")),r.a.createElement(N.a,null)),r.a.createElement(G.a,{defaultActiveKey:t.auth?"Home":"All",id:"feed-nav"},r.a.createElement(I.a,{eventKey:"All",title:"All"},o?oe(o):H?r.a.createElement(C.a,{style:{marginTop:15}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"We're encounter errors. Try again later?"))):ce()),r.a.createElement(I.a,{eventKey:"Home",title:"Home"},g?oe(g):U?t.auth?r.a.createElement(C.a,{style:{marginTop:15}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Subscribe to channels in your Profile page."))):r.a.createElement(C.a,{style:{marginTop:15}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Create an account to subscribe to specific channels."))):ce()),r.a.createElement(I.a,{eventKey:"Academic",title:"Academic"},v?oe(v):J?t.auth?r.a.createElement(C.a,{style:{marginTop:15}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Subscribe to channels in your Profile page."))):r.a.createElement(C.a,{style:{marginTop:15}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Create an account to subscribe to specific channels."))):ce()),r.a.createElement(I.a,{eventKey:"Bulletin",title:"Bulletin"},k?oe(k):$?r.a.createElement(C.a,{style:{marginTop:15}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"We're encounter errors. Try again later?"))):ce()))))},H=a(14),z=a(121),D=a(63),W=a(36),U=a.n(W),K=function(){var e=Object(d.f)().username,t=O(),a=A(),c=Object(n.useState)(null),o=Object(u.a)(c,2),l=o[0],m=o[1],g=Object(n.useState)(!0),h=Object(u.a)(g,2),p=h[0],f=h[1],v=Object(n.useState)(!1),E=Object(u.a)(v,2),y=E[0],j=E[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),S=x[0],G=x[1],I=Object(n.useState)(!1),R=Object(u.a)(I,2),M=R[0],q=R[1],F=Object(n.useState)(!1),W=Object(u.a)(F,2),K=W[0],Q=W[1],V=Object(n.useState)(!1),J=Object(u.a)(V,2),X=J[0],Z=J[1],Y=Object(n.useState)(!1),$=Object(u.a)(Y,2),ee=$[0],te=$[1],ae=Object(n.useState)(null),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],oe=Object(n.useState)(!1),le=Object(u.a)(oe,2),ie=le[0],se=le[1],ue=Object(n.useState)(0),me=Object(u.a)(ue,2),de=me[0],ge=me[1],he=Object(n.useState)({}),pe=Object(u.a)(he,2),fe=pe[0],ve=pe[1];Object(n.useEffect)((function(){var n=.001*(new Date).getTime()>>0;(ge(n),function(){var a=Object(s.a)(i.a.mark((function a(){var n,r,c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(H.firestore)().collection("users").where("username","==",e).limit(1).get();case 2:if(!(n=a.sent).empty){a.next=8;break}console.log("empty"),f(!1),a.next=22;break;case 8:return a.next=10,n.docs[0].id;case 10:return r=a.sent,a.next=13,n.docs[0].data();case 13:c=a.sent,m(c),ve(c.actives),c.actives&&((c.actives.French||c.actives.Mandarin||c.actives.Spanish||c.actives["Languages (General)"])&&Q(!0),(c.actives.Biology||c.actives.Chemistry||c.actives.Physics||c.actives["Sciences (General)"])&&Z(!0),(c.actives.Psychology||c.actives.Sociology||c.actives["Social Sciences (General)"])&&te(!0)),console.log("userResults = ",c),console.log("userResults.uid = ",c.uid),function(){var e=Object(s.a)(i.a.mark((function e(a){var n,c,o,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=[],e.next=4,t.db.collection("posts").orderBy(a,"desc").where("author","==",r).limit(10).get();case 4:if(!(c=e.sent).empty&&null!=c){e.next=9;break}return console.log("No matching documents"),se(!0),e.abrupt("return");case 9:c.forEach((function(e){n=[].concat(Object(b.a)(n),[{id:e.id,data:e.data()}])})),o=0;case 11:if(!(o<n.length)){e.next=20;break}return l=n[o],e.next=15,t.db.collection("comments").where("parent","==",l.id).get();case 15:s=e.sent,n[o]={id:l.id,data:l.data,numComments:s.size};case 17:o++,e.next=11;break;case 20:ce(n),console.log("docList = ",n),se(!0),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0),se(!0);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}()("timestamp.seconds"),f(!1);case 22:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()(),a.auth)&&function(){var t=Object(s.a)(i.a.mark((function t(){var n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(H.firestore)().collection("users").doc(null===a||void 0===a||null===(n=a.auth)||void 0===n?void 0:n.uid).get();case 2:(null===(c=t.sent)||void 0===c||null===(r=c.data())||void 0===r?void 0:r.username)==e&&j(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[a,t]);var Ee=function(e){var t=fe;1==fe[e]?(t[e]=!1,ve(t)):(t[e]=!0,ve(t))};return console.log("actives = ",fe),r.a.createElement("div",null,r.a.createElement(_.a,{bg:"light",variant:"light"},r.a.createElement(_.a.Brand,{href:"/"}," ","ioyou"),r.a.createElement(B.a,{className:"ml-auto"},a.auth?r.a.createElement("div",null,r.a.createElement(L.a,{variant:"light",onClick:Object(s.a)(i.a.mark((function e(){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("users").doc(null===a||void 0===a||null===(n=a.auth)||void 0===n?void 0:n.uid).get();case 2:c=e.sent,o=null===c||void 0===c||null===(r=c.data())||void 0===r?void 0:r.username,window.location.href="/user/".concat(o);case 5:case"end":return e.stop()}}),e)}))),style:{marginRight:10}},"Profile"),r.a.createElement(L.a,{href:"/post",variant:"outline-dark",style:{marginRight:10}},"Create Post"),r.a.createElement(L.a,{variant:"light",onClick:function(){j(!1),t.doSignOut()}},"sign out")):r.a.createElement("div",null,r.a.createElement(L.a,{variant:"outline-dark",href:"/login",style:{marginRight:10}},"log in"),r.a.createElement(L.a,{variant:"light",href:"/signup"},"sign up")))),p?r.a.createElement(P.a,{className:U.a.paddingTop},r.a.createElement(T.a,{animation:"border"})):l?r.a.createElement(P.a,{className:U.a.paddingTop},r.a.createElement(C.a,null,r.a.createElement(C.a.Body,null,r.a.createElement(w.a,null,r.a.createElement(N.a,null,r.a.createElement("h2",null,"@",e),r.a.createElement("h2",null,l.name)),r.a.createElement(N.a,null,r.a.createElement("h3",null,"Credits: "))),r.a.createElement("hr",null),r.a.createElement(w.a,{style:{paddingLeft:15}},r.a.createElement("h3",{style:{paddingRight:15}},"Channels"),y?S?r.a.createElement(L.a,{variant:"outline-dark",onClick:Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),e.next=3,Object(H.firestore)().collection("users").doc(null===(t=a.auth)||void 0===t?void 0:t.uid).update({actives:fe});case 3:case"end":return e.stop()}}),e)})))},"Save"):r.a.createElement(L.a,{variant:"outline-dark",onClick:function(){G(!0)}},"Edit"):r.a.createElement("div",null)),S?r.a.createElement(w.a,{style:{paddingTop:15,paddingLeft:15}},r.a.createElement(L.a,{active:fe.Arts,variant:"outline-dark",style:{marginRight:15,marginBottom:15},onClick:function(){Ee("Arts"),q(!M)}},"Arts"),r.a.createElement(L.a,{active:fe.Business,variant:"outline-dark",style:{marginRight:15,marginBottom:15},onClick:function(){Ee("Business"),q(!M)}},"Business"),r.a.createElement(L.a,{variant:"outline-dark",active:fe["Computer Science"],style:{marginRight:15,marginBottom:15},onClick:function(){Ee("Computer Science"),q(!M)}},"Computer Science"),r.a.createElement(L.a,{variant:"outline-dark",active:fe.Economics,style:{marginRight:15,marginBottom:15},onClick:function(){Ee("Economics"),q(!M)}},"Economics"),r.a.createElement(L.a,{variant:"outline-dark",active:fe.Finance,style:{marginRight:15,marginBottom:15},onClick:function(){Ee("Finance"),q(!M)}},"Finance"),r.a.createElement(L.a,{variant:"outline-dark",active:fe.History,style:{marginRight:15,marginBottom:15},onClick:function(){Ee("History"),q(!M)}},"History"),r.a.createElement(L.a,{variant:"outline-dark",active:fe.Humanities,style:{marginRight:15,marginBottom:15},onClick:function(){Ee("Humanities"),q(!M)}},"Humanities"),r.a.createElement(z.a,{id:"lang",title:"Languages",variant:K?"dark":"outline-dark",style:{marginRight:15,marginBottom:15}},r.a.createElement(D.a.Item,{active:fe.French,onClick:function(){Ee("French"),q(!M),fe.French||fe.Mandarin||fe.Spanish||fe["Languages (General)"]?Q(!0):Q(!1)}},"French"),r.a.createElement(D.a.Item,{active:fe.Mandarin,onClick:function(){Ee("Mandarin"),q(!M),fe.French||fe.Mandarin||fe.Spanish||fe["Languages (General)"]?Q(!0):Q(!1)}},"Mandarin"),r.a.createElement(D.a.Item,{active:fe.Spanish,onClick:function(){Ee("Spanish"),q(!M),fe.French||fe.Mandarin||fe.Spanish||fe["Languages (General)"]?Q(!0):Q(!1)}},"Spanish"),r.a.createElement(D.a.Item,{active:fe["Languages (General)"],onClick:function(){Ee("Languages (General)"),q(!M),fe.French||fe.Mandarin||fe.Spanish||fe["Languages (General)"]?Q(!0):Q(!1)}},"General")),r.a.createElement(L.a,{variant:"outline-dark",style:{marginRight:15,marginBottom:15},active:fe.Mathematics,onClick:function(){Ee("Mathematics"),q(!M)}},"Mathematics"),r.a.createElement(z.a,{id:"sci",title:"Sciences",variant:X?"dark":"outline-dark",style:{marginRight:15,marginBottom:15}},r.a.createElement(D.a.Item,{active:fe.Biology,onClick:function(){Ee("Biology"),q(!M),fe.Biology||fe.Chemistry||fe.Physics||fe["Sciences (General)"]?Z(!0):Z(!1)}},"Biology"),r.a.createElement(D.a.Item,{active:fe.Chemistry,onClick:function(){Ee("Chemistry"),q(!M),fe.Biology||fe.Chemistry||fe.Physics||fe["Sciences (General)"]?Z(!0):Z(!1)}},"Chemistry"),r.a.createElement(D.a.Item,{active:fe.Physics,onClick:function(){Ee("Physics"),q(!M),fe.Biology||fe.Chemistry||fe.Physics||fe["Sciences (General)"]?Z(!0):Z(!1)}},"Physics"),r.a.createElement(D.a.Item,{active:fe["Sciences (General)"],onClick:function(){Ee("Sciences (General)"),q(!M),fe.Biology||fe.Chemistry||fe.Physics||fe["Sciences (General)"]?Z(!0):Z(!1)}},"General")),r.a.createElement(z.a,{id:"lang",title:"Social Sciences",variant:ee?"dark":"outline-dark",style:{marginRight:15,marginBottom:15}},r.a.createElement(D.a.Item,{active:fe.Psychology,onClick:function(){Ee("Psychology"),q(!M),fe.Psychology||fe.Sociology||fe["Social Sciences (General)"]?te(!0):te(!1)}},"Psychology"),r.a.createElement(D.a.Item,{active:fe.Sociology,onClick:function(){Ee("Sociology"),q(!M),fe.Psychology||fe.Sociology||fe["Social Sciences (General)"]?te(!0):te(!1)}},"Sociology"),r.a.createElement(D.a.Item,{active:fe["Social Sciences (General)"],onClick:function(){Ee("Social Sciences (General)"),q(!M),fe.Psychology||fe.Sociology||fe["Social Sciences (General)"]?te(!0):te(!1)}},"General")),r.a.createElement(L.a,{variant:"outline-dark",style:{marginRight:15,marginBottom:15},active:fe.General,onClick:function(){Ee("General"),q(!M)}},"General")):fe?function(){console.log("subjectsView is triggered");var e=Object.entries(fe).map((function(e){var t=Object(u.a)(e,2),a=t[0];t[1];return fe[a]?r.a.createElement(L.a,{key:a,active:!0,variant:"outline-dark",style:{marginRight:15,marginBottom:15}},a):r.a.createElement("div",{key:a})}));return console.log("subjectObjects = ",e),r.a.createElement(w.a,{style:{paddingTop:15,paddingLeft:15}},e)}():r.a.createElement("div",null,"This is triggering"))),r.a.createElement("h2",{style:{paddingTop:50,paddingLeft:22}},"Post History"),re?r.a.createElement("div",null,re.map((function(e){return r.a.createElement("div",{key:e.id,style:{paddingTop:15}},function(e){var t=de-e.data.timestamp.seconds,a="";if(t<120)a="about a minute ago";else if(t<3600)a="".concat(Math.floor(t/60)," minutes ago");else if(t<86400){var n=Math.floor(t/3600);a=1==n?"about an hour ago":"".concat(n," hours ago")}else{var c=Math.floor(t/86400);a=1==c?"yesterday":"".concat(c," days ago")}return r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement("a",{href:"/post/".concat(e.id)},r.a.createElement(C.a.Title,null,e.data.title)),r.a.createElement(C.a.Subtitle,null,function(){var t,a=null===(t=e.data.channels)||void 0===t?void 0:t.map((function(t){return r.a.createElement("p",{key:t},0==e.data.channels.indexOf(t)?"#".concat(t):", #".concat(t))}));return r.a.createElement("div",null,r.a.createElement(w.a,{style:{marginLeft:1}},a))}()),r.a.createElement(C.a.Text,{className:U.a.fontLess}," ",e.data.desc),r.a.createElement(C.a.Text,{className:U.a.fontLess},1==e.numComments?r.a.createElement("a",{href:"/post/".concat(e.id)},e.numComments," comment"):r.a.createElement("a",{href:"/post/".concat(e.id)},e.numComments," comments")," "," - posted by ",r.a.createElement("a",{href:"/user/".concat(e.data.authorName)},"@".concat(e.data.authorName))," - ",a)))}(e))}))):ie?r.a.createElement("h3",{style:{paddingTop:15}},"No posts."):r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(T.a,{animation:"border"}))):r.a.createElement(P.a,{className:U.a.paddingTop},r.a.createElement("h1",null,"User does not exist.")))},Q=a(122),V=a(84),J=a.n(V),X=function(){var e=O(),t=A(),a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),g=d[0],h=d[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),v=f[0],E=f[1],b=Object(n.useState)(""),y=Object(u.a)(b,2),j=y[0],k=y[1],x=Object(n.useState)(""),S=Object(u.a)(x,2),w=S[0],C=S[1],N=Object(n.useState)(""),G=Object(u.a)(N,2),I=G[0],R=G[1],M=Object(n.useState)(""),q=Object(u.a)(M,2),F=q[0],z=q[1],D=Object(n.useState)(!1),W=Object(u.a)(D,2),U=W[0],K=W[1],V=Object(n.useState)(!1),X=Object(u.a)(V,2),Z=X[0],Y=X[1];Object(n.useEffect)((function(){t.auth&&0==Z&&(window.location.href="/")}),[t,e]);var $=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Y(!0),console.log("name = ",g),console.log("username = ",v),console.log("email = ",j),console.log("password = ",w),console.log(t.currentTarget),!(!1===t.currentTarget.checkValidity()||!1===U||F.length>0)){e.next=13;break}console.log(o),t.preventDefault(),t.stopPropagation(),e.next=37;break;case 13:return e.next=15,ee(v);case 15:if(!(e.sent>0)){e.next=20;break}z("Already taken."),e.next=37;break;case 20:return e.prev=20,console.log("this is triggered"),e.next=24,Object(H.auth)().createUserWithEmailAndPassword(j,w).catch((function(e){console.log(e)}));case 24:if(!(a=e.sent)){e.next=30;break}return console.log("this is triggered 2"),r=null===a||void 0===a||null===(n=a.user)||void 0===n?void 0:n.uid,e.next=30,Object(H.firestore)().collection("users").doc(r).set({name:g,username:v,actives:{Arts:!1,Biology:!1,Business:!1,"Computer Science":!1,Economics:!1,Finance:!1,French:!1,General:!1,Humanities:!1,"Languages (General)":!1,Mandarin:!1,Psychology:!1,Spanish:!1}}).then((function(){window.location.href="/user/".concat(v)}));case 30:l(!0),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(20),console.log(e.t0),R(e.t0.message);case 37:case"end":return e.stop()}}),e,null,[[20,33]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.firestore)().collection("users").where("username","==",t).limit(1).get();case 2:return a=e.sent,e.abrupt("return",a.size);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(_.a,{bg:"light",variant:"light"},r.a.createElement(_.a.Brand,{href:"/"}," ","ioyou"),r.a.createElement(B.a,{className:"ml-auto"}),r.a.createElement(L.a,{variant:"outline-dark"},"log in")),r.a.createElement(P.a,{className:J.a.paddingTop,style:{paddingBottom:10}},r.a.createElement(Q.a,{validated:o,onSubmit:$},r.a.createElement(Q.a.Group,{controlId:"formBasicName"},r.a.createElement(Q.a.Label,null,"Name"),r.a.createElement(Q.a.Control,{required:!0,type:"text",placeholder:"Jane Doe",onChange:function(e){h(e.target.value)},value:g}),r.a.createElement(Q.a.Control.Feedback,{type:"invalid"},"Please provide a name.")),r.a.createElement(Q.a.Group,{controlId:"formBasicName"},r.a.createElement(Q.a.Label,null,"Username"),r.a.createElement(Q.a.Control,{required:!0,type:"text",placeholder:"username",onChange:function(e){E(e.target.value),e.target.value.length>15?z("Too long. Usernames should be < 15 characters."):z("")},value:v}),r.a.createElement(Q.a.Text,{className:"text-danger"},F)),r.a.createElement(Q.a.Group,{controlId:"formBasicEmail"},r.a.createElement(Q.a.Label,null,"Email address"),r.a.createElement(Q.a.Control,{required:!0,type:"email",placeholder:"jdoe@email.com",onChange:function(e){k(e.target.value)},value:j}),r.a.createElement(Q.a.Control.Feedback,{type:"invalid"},"Please provide an email.")),r.a.createElement(Q.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Q.a.Label,null,"Password"),r.a.createElement(Q.a.Control,{required:!0,type:"password",placeholder:"Password",onChange:function(e){C(e.target.value),e.target.value.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,30}$/)?(K(!0),console.log("passCheck")):(K(!1),console.log("failCheck"))},value:w}),U?r.a.createElement(Q.a.Text,{className:"text-success"},"Looks good!"):r.a.createElement(Q.a.Text,{className:"text-danger"},"At least 8 characters and contain an uppercase letter, lowercase letter, number, and special character.")),r.a.createElement(Q.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(Q.a.Check,{required:!0,type:"checkbox",label:"I agree to the terms and conditions."})),Z?r.a.createElement(L.a,{variant:"primary",disabled:!0},r.a.createElement(T.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(L.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement("p",{className:"text-danger"},I)))},Z=a(85),Y=a.n(Z),$=function(){var e=O(),t=A(),a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),g=d[0],h=d[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),v=f[0],E=f[1],b=Object(n.useState)(""),y=Object(u.a)(b,2),j=y[0],k=y[1],x=Object(n.useState)(!1),S=Object(u.a)(x,2),w=S[0],C=S[1];Object(n.useEffect)((function(){t.auth&&o&&(window.location.href="/")}),[t,e]);var N=function(){var t=Object(s.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),C(!0),console.log("email = ",g),console.log("password = ",v),console.log(a.currentTarget),!1!==a.currentTarget.checkValidity()){t.next=11;break}console.log(o),a.preventDefault(),a.stopPropagation(),t.next=22;break;case 11:return t.prev=11,t.next=14,e.doSignInWithEmailAndPassword(g,v);case 14:l(!0),window.location.href="/",t.next=22;break;case 18:t.prev=18,t.t0=t.catch(11),console.log(t.t0),k(t.t0.message);case 22:console.log(o);case 23:case"end":return t.stop()}}),t,null,[[11,18]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(_.a,{bg:"light",variant:"light"},r.a.createElement(_.a.Brand,{href:"/"}," ","ioyou"),r.a.createElement(B.a,{className:"ml-auto"},r.a.createElement(L.a,{variant:"outline-dark",href:"/signup"},"sign up"))),r.a.createElement(P.a,{className:Y.a.paddingTop},r.a.createElement(Q.a,{validated:o,onSubmit:N},r.a.createElement(Q.a.Group,{controlId:"formBasicEmail"},r.a.createElement(Q.a.Label,null,"Email address"),r.a.createElement(Q.a.Control,{required:!0,type:"email",placeholder:"Enter email",onChange:function(e){h(e.target.value)},value:g})),r.a.createElement(Q.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Q.a.Label,null,"Password"),r.a.createElement(Q.a.Control,{required:!0,type:"password",placeholder:"Password",onChange:function(e){E(e.target.value)},value:v})),w?r.a.createElement(L.a,{variant:"primary",disabled:!0},r.a.createElement(T.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(L.a,{variant:"primary",type:"submit",style:{marginTop:10}},"Log in")),r.a.createElement("p",{className:"text-danger"},j)))},ee=a(86),te=a.n(ee),ae=function(){var e=O(),t=A(),a=Object(n.useState)([]),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)([]),d=Object(u.a)(m,2),g=d[0],h=d[1],p=Object(n.useState)(["Arts","Business","Computer Science","Economics","Finance","History","Humanities","French","Mandarin","Spanish","Languages (General)","Mathematics","Biology","Chemistry","Physics","Sciences (General)","Psychology","Sociology","Social Sciences (General)","General"]),f=Object(u.a)(p,2),v=f[0],E=(f[1],Object(n.useState)("")),y=Object(u.a)(E,2),j=y[0],k=y[1],x=Object(n.useState)(""),S=Object(u.a)(x,2),C=S[0],N=S[1],G=Object(n.useState)(""),I=Object(u.a)(G,2),R=I[0],M=I[1],q=Object(n.useState)(!1),F=Object(u.a)(q,2),z=F[0],D=F[1],W=Object(n.useState)(""),U=Object(u.a)(W,2),K=U[0],V=U[1],J=Object(n.useState)(""),X=Object(u.a)(J,2),Z=X[0],Y=X[1];Object(n.useEffect)((function(){t.auth?function(){var e=Object(s.a)(i.a.mark((function e(){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.firestore)().collection("users").doc(null===(a=t.auth)||void 0===a?void 0:a.uid).get();case 2:r=e.sent,Y(null===(n=r.data())||void 0===n?void 0:n.username);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():window.location.href="/"}),[t,e]);var $=function(){var e=Object(s.a)(i.a.mark((function e(a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),a.preventDefault(),console.log(j),console.log(C),n=null,n=0==o.length?{title:j,desc:C,timestamp:H.firestore.Timestamp.now(),author:null===t||void 0===t||null===(r=t.auth)||void 0===r?void 0:r.uid,channels:["General"],authorName:Z}:{title:j,desc:C,timestamp:H.firestore.Timestamp.now(),author:null===t||void 0===t||null===(c=t.auth)||void 0===c?void 0:c.uid,channels:o,authorName:Z},e.next=8,Object(H.functions)().httpsCallable("createPost")(n);case 8:window.location.href="/";case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(_.a,{bg:"light",variant:"light"},r.a.createElement(_.a.Brand,{href:"/"}," ","ioyou"),r.a.createElement(B.a,{className:"ml-auto"},r.a.createElement(L.a,{variant:"light",onClick:Object(s.a)(i.a.mark((function a(){var n,r,c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.db.collection("users").doc(null===t||void 0===t||null===(n=t.auth)||void 0===n?void 0:n.uid).get();case 2:c=a.sent,o=null===c||void 0===c||null===(r=c.data())||void 0===r?void 0:r.username,window.location.href="/user/".concat(o);case 5:case"end":return a.stop()}}),a)}))),style:{marginRight:10}},"Profile"),r.a.createElement(L.a,{variant:"light",onClick:function(){window.location.reload(),e.doSignOut()}},"sign out"))),r.a.createElement(P.a,{className:te.a.paddingTop},r.a.createElement("div",null,r.a.createElement("h1",{style:{paddingBottom:15}},"Create a new post"),r.a.createElement(Q.a,{onSubmit:$},r.a.createElement(Q.a.Group,{controlId:"channels"},r.a.createElement(Q.a.Label,null,"Channels"),r.a.createElement(w.a,{style:{marginLeft:10}},function(){var e=o.map((function(e){return r.a.createElement(L.a,{variant:"dark",key:e,style:{marginRight:15,marginBottom:15},onClick:function(){var t=Object(b.a)(o),a=t.indexOf(e);-1!==a&&(t.splice(a,1),l(t)),o.length<11&&M("")}},e)}));return r.a.createElement("div",null,e)}(),function(){var e=g.map((function(e){return r.a.createElement(L.a,{variant:"outline-dark",key:e,style:{marginRight:15,marginBottom:15},onClick:function(){if(o.length>9)M("Maximum 10 channels");else{if(M(""),V(""),h([]),-1!=o.indexOf(e))return;l([].concat(Object(b.a)(o),[e]))}}},e)}));return r.a.createElement("div",null,e)}()),r.a.createElement(Q.a.Control,{type:"text",placeholder:"What subjects?",onChange:function(e){if(V(e.target.value),e.target.value.length>0){for(var t=e.target.value,a=[],n=0;n<v.length;n++)v[n].replace(/[^a-zA-Z0-9]/g,"").substr(0,t.length).toLowerCase()==t.toLowerCase()&&a.push(v[n]);h(a)}else h([])},value:K}),r.a.createElement(Q.a.Text,{className:"text-danger"},R)),r.a.createElement(Q.a.Group,{controlId:"title"},r.a.createElement(Q.a.Label,null,"Title"),r.a.createElement(Q.a.Control,{required:!0,type:"text",placeholder:"What question?",onChange:function(e){k(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"description"},r.a.createElement(Q.a.Label,null,"Description"),r.a.createElement(Q.a.Control,{as:"textarea",rows:3,placeholder:"Add more details if necessary.",onChange:function(e){N(e.target.value)}})),z?r.a.createElement(L.a,{variant:"primary",disabled:!0,style:{marginTop:15}},r.a.createElement(T.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(L.a,{variant:"primary",type:"submit",style:{marginTop:15}},"Post"),function(){var e=o.map((function(e){return r.a.createElement("p",{key:e},0==o.indexOf(e)?"to ".concat(e):", ".concat(e))}));return r.a.createElement(w.a,{style:{marginTop:15,marginLeft:15}},e)}()))))},ne=a(33),re=a.n(ne),ce=function(e){var t=O(),a=A(),c=Object(d.f)().postid,o=Object(n.useState)(null),l=Object(u.a)(o,2),m=l[0],g=l[1],h=Object(n.useState)(null),p=Object(u.a)(h,2),f=p[0],v=p[1],E=Object(n.useState)(""),y=Object(u.a)(E,2),j=y[0],k=y[1],x=Object(n.useState)(null),S=Object(u.a)(x,2),N=S[0],G=S[1],I=Object(n.useState)(!1),R=Object(u.a)(I,2),M=R[0],q=R[1],F=Object(n.useState)(!1),z=Object(u.a)(F,2),D=z[0],W=z[1],U=Object(n.useState)(!1),K=Object(u.a)(U,2),V=K[0],J=K[1],X=Object(n.useState)(0),Z=Object(u.a)(X,2),Y=Z[0],$=Z[1],ee=function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],e.next=4,t.db.collection("comments").where("parent","==",c).get();case 4:if(!(n=e.sent).empty&&null!=n){e.next=9;break}return console.log("No matching documents"),W(!0),e.abrupt("return");case 9:n.forEach((function(e){a=[].concat(Object(b.a)(a),[{id:e.id,data:e.data()}])})),G(a),console.log("docList = ",a),W(!0),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),W(!0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=.001*(new Date).getTime()>>0;($(e),a.auth)&&function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.firestore)().collection("users").doc(null===(t=a.auth)||void 0===t?void 0:t.uid).get();case 2:return e.next=4,e.sent.data();case 4:n=e.sent,g(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();(function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(H.firestore)().collection("posts").doc(c).get();case 3:return e.next=5,e.sent.data();case 5:t=e.sent,console.log("postDoc = ",t),v(t),ee(),q(!0),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),q(!0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[a,t]);var te=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),J(!0),console.log(j),r={comment:j,parent:c,thread:c,timestamp:H.firestore.Timestamp.now(),author:null===a||void 0===a||null===(n=a.auth)||void 0===n?void 0:n.uid,authorName:m.username},e.next=6,Object(H.functions)().httpsCallable("createComment")(r).then((function(){ee(),J(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(_.a,{bg:"light",variant:"light"},r.a.createElement(_.a.Brand,{href:"/"}," ","ioyou"),r.a.createElement(B.a,{className:"ml-auto"},a.auth?r.a.createElement("div",null,r.a.createElement(L.a,{variant:"light",onClick:Object(s.a)(i.a.mark((function e(){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("users").doc(null===a||void 0===a||null===(n=a.auth)||void 0===n?void 0:n.uid).get();case 2:c=e.sent,o=null===c||void 0===c||null===(r=c.data())||void 0===r?void 0:r.username,window.location.href="/user/".concat(o);case 5:case"end":return e.stop()}}),e)}))),style:{marginRight:10}},"Profile"),r.a.createElement(L.a,{variant:"outline-dark",onClick:function(){window.location.reload(),t.doSignOut()}},"sign out")):r.a.createElement("div",null,r.a.createElement(L.a,{variant:"outline-dark",href:"/login",style:{marginRight:10}},"log in"),r.a.createElement(L.a,{variant:"light",href:"/signup"},"sign up")))),f?r.a.createElement(P.a,{className:re.a.paddingTop},r.a.createElement(C.a,{style:{marginBottom:30}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,null===f||void 0===f?void 0:f.title),r.a.createElement(C.a.Subtitle,null,function(e){var t,a=null===(t=e.channels)||void 0===t?void 0:t.map((function(t){return r.a.createElement("p",{key:t},0==e.channels.indexOf(t)?"#".concat(t):", #".concat(t))}));return r.a.createElement("div",null,r.a.createElement(w.a,{style:{marginLeft:1}},a))}(f)),r.a.createElement(C.a.Text,null,null===f||void 0===f?void 0:f.desc),r.a.createElement(C.a.Text,{className:re.a.fontLess},"Posted by ","@".concat(null===f||void 0===f?void 0:f.authorName)," at ",null===f||void 0===f?void 0:f.timestamp.seconds))),a.auth?r.a.createElement(Q.a,{onSubmit:te},r.a.createElement(Q.a.Group,{controlId:"description"},r.a.createElement(Q.a.Label,null,"Answer"),r.a.createElement(Q.a.Control,{as:"textarea",rows:3,placeholder:"",onChange:function(e){k(e.target.value)}})),V?r.a.createElement(L.a,{variant:"primary",style:{marginTop:15}},r.a.createElement(T.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(L.a,{variant:"primary",type:"submit",style:{marginTop:15}},"Comment")):r.a.createElement("div",null),r.a.createElement("hr",null),N?r.a.createElement("div",null,r.a.createElement("h3",{style:{paddingTop:50,paddingLeft:22,paddingBottom:15}},N.length," comments"),N.map((function(e){return r.a.createElement("div",{key:e.id,style:{paddingTop:15}},function(e){var t=Y-e.data.timestamp.seconds,a="";if(t<120)a="about a minute ago";else if(t<3600)a="".concat(Math.floor(t/60)," minutes ago");else if(t<86400){var n=Math.floor(t/3600);a=1==n?"about an hour ago":"".concat(n," hours ago")}else{var c=Math.floor(t/86400);a=1==c?"yesterday":"".concat(c," days ago")}return r.a.createElement(C.a,{style:{marginBottom:20}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,"@".concat(e.data.authorName)),r.a.createElement(C.a.Text,{className:re.a.fontLess}," ",e.data.comment),r.a.createElement(C.a.Text,{className:re.a.fontLess},a)))}(e))}))):D?r.a.createElement("h3",{style:{paddingTop:50,paddingLeft:22,paddingBottom:15}},"0 comments"):r.a.createElement(T.a,{animation:"border"})):M?r.a.createElement(P.a,{className:re.a.paddingTop},r.a.createElement("h1",null,"No post found.")):r.a.createElement(P.a,{className:re.a.paddingTop},r.a.createElement(T.a,{animation:"border"})))},oe=function(){return A().initializing?r.a.createElement("div",null):r.a.createElement(m.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:g},r.a.createElement(F,null)),r.a.createElement(d.a,{path:h},r.a.createElement(X,null)),r.a.createElement(d.a,{path:p},r.a.createElement($,null)),r.a.createElement(d.a,{path:f},r.a.createElement(ae,null)),r.a.createElement(d.a,{path:v},r.a.createElement(K,null)),r.a.createElement(d.a,{path:E},r.a.createElement(ce,null))))},le=function(){var e=O(),t=Object(n.useState)((function(){var t=e.auth.currentUser;return t?{initializing:!1,auth:t}:{initializing:!0,auth:null}})),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){var t=e.auth.onAuthStateChanged((function(e){console.log("New user detected in auth onChange: ",e),null===e?(console.log("Not authenticated"),o({initializing:!1,auth:null})):o((function(t){return null===t.auth?(console.log("Authenticated"),{initializing:!1,auth:e}):(console.log("Bug: reauthenticated"),t)}))}));return function(){t()}}),[e.auth]),r.a.createElement(R.Provider,{value:c},r.a.createElement(oe,null))},ie=function(){var e=O(),t=Object(n.useCallback)(Object(s.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.auth.currentUser){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.auth.getRedirectResult();case 5:if(a=t.sent,console.log("Received Redirect result: ",a),n=a.user,a.additionalUserInfo,a.credential,n){t.next=11;break}return console.log("No Twitter Redirect Result!"),t.abrupt("return");case 11:console.log("Current user after redirect: ",e.auth.currentUser),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(2),t.t0.code,t.t0.message,t.t0.email,t.t0.credential,console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[2,14]])}))),[e.auth]);return Object(n.useEffect)((function(){console.log("Current user in Twitter Checking Component: ",e.auth.currentUser),t()}),[t,e.auth]),r.a.createElement(le,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y.Provider,{value:new function e(){var t=this;Object(j.a)(this,e),this.auth=void 0,this.db=void 0,this.functions=void 0,this.provider=void 0,this.doTwitterSignIn=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.auth.signInWithRedirect(t.provider);case 1:case"end":return e.stop()}}),e)}))),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},x.a.apps.length||x.a.initializeApp(S),this.auth=x.a.auth(),this.db=x.a.firestore(),this.functions=x.a.functions(),this.provider=new x.a.auth.TwitterAuthProvider}},r.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,a){e.exports={paddingTop:"Question_paddingTop__3SnTv",centerItems:"Question_centerItems__2niqs",fontLess:"Question_fontLess__1iLQC",opaqueLess:"Question_opaqueLess__2kYLQ",refresh:"Question_refresh__vU4gl"}},36:function(e,t,a){e.exports={paddingTop:"Profile_paddingTop__3kNOc",centerItems:"Profile_centerItems__3xB3O",fontLess:"Profile_fontLess__1fK0e",opaqueLess:"Profile_opaqueLess__DR6mh",refresh:"Profile_refresh__Vh51B"}},62:function(e,t,a){e.exports={paddingTop:"Home_paddingTop__lwuR_",centerItems:"Home_centerItems__11x6e",fontLess:"Home_fontLess__3aF4X",opaqueLess:"Home_opaqueLess__1EMYG",refresh:"Home_refresh__2Epj3",aNoStyle:"Home_aNoStyle__3zzT_"}},84:function(e,t,a){e.exports={paddingTop:"Signup_paddingTop__3HXmM",centerItems:"Signup_centerItems__k192t",fontLess:"Signup_fontLess__X2EvG",opaqueLess:"Signup_opaqueLess__1t1Dw",refresh:"Signup_refresh__26-ho",errMessage:"Signup_errMessage__2DZ-o"}},85:function(e,t,a){e.exports={paddingTop:"Login_paddingTop__217cV",centerItems:"Login_centerItems__1sObU",fontLess:"Login_fontLess__30mul",opaqueLess:"Login_opaqueLess__3Bk5N",refresh:"Login_refresh__3VAKS"}},86:function(e,t,a){e.exports={paddingTop:"Post_paddingTop__MEynF",centerItems:"Post_centerItems__2dmyQ",fontLess:"Post_fontLess__hqyhX",opaqueLess:"Post_opaqueLess__1M4G5",refresh:"Post_refresh__1fCFf"}},90:function(e,t,a){e.exports=a(112)}},[[90,1,2]]]);
//# sourceMappingURL=main.af05f840.chunk.js.map